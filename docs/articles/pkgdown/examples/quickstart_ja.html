<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>クイック・スタートガイド • quanteda</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../../pkgdown.css" rel="stylesheet">
<script src="../../../jquery.sticky-kit.min.js"></script><script src="../../../pkgdown.js"></script><link href="../../../extra.css" rel="stylesheet">
<script src="../../../extra.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-144616-24', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../index.html">Quanteda</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../../articles/pkgdown/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/examples/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/examples/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../../articles/pkgdown/comparison.html">Features</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../../../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../../articles/design.html">Design</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>クイック・スタートガイド</h1>
            
          </div>

    
    
<div class="contents">
<p>本ページは<a href="../quickstart.html">Quic Start Guide</a>の日本語訳であり，英語のテキスト分析を通じて<strong>quanteda</strong>の基本的な使い方を説明する．日本語の分析法に関しては，以下のページを参照．</p>
<ul>
<li><a href="japanese_speech_ja.html">事例: 衆議院外務委員会の議事録</a></li>
<li><a href="japanese_twitter_ja.html">事例: 2017年総選挙に関するツイート</a></li>
</ul>
<section id="installing-the-package" class="level1"><h1>パッケージのインストール</h1>
<p><strong>quanteda</strong>は<a href="https://CRAN.R-project.org/package=quanteda">CRAN</a>からインストールできる．GUIのRパッケージインストーラを使用してインストールするか，次のコマンドを実行する．</p>
<pre class="sourceCode r" id="cb1"><code class="sourceCode r"><div class="sourceLine" id="cb1-1" data-line-number="1">
<span class="kw">install.packages</span>(<span class="st">"quanteda"</span>) </div></code></pre>
<p>GitHubから最新の開発バージョンをインストールする方法については，<a href="https://github.com/quanteda/quanteda" class="uri">https://github.com/quanteda/quanteda</a> を参照．</p>
<section id="additional-recommended-packages" class="level2"><h2>インストールが推奨されるパッケージ</h2>
<p><strong>quanteda</strong>には連携して機能を拡張する一連のパッケージがあり，それらをインストールすることが推奨される．</p>
<ul>
<li>
<a href="https://github.com/kbenoit/readtext"><strong>readtext</strong></a>：多くの入力形式からテキストデータをRに簡単に読み込むパッケージ</li>
<li>
<a href="https://github.com/kbenoit/spacyr"><strong>spacyr</strong></a>：Pythonの<a href="http://spacy.io">spaCy</a>ライブラリを使用した自然言語解析のためのパッケージで，品詞タグ付け，固有表現抽出，および係り受け関係の解析などができる</li>
<li>
<p><a href="https://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>：<strong>quanteda</strong>の本記事内の説明で使用する追加のテキストデータ</p>
<pre class="sourceCode r" id="cb2"><code class="sourceCode r"><div class="sourceLine" id="cb2-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"quanteda/quanteda.corpora"</span>)</div></code></pre>
</li>
<li>
<p><a href="https://github.com/kbenoit/LIWCalike"><strong>LIWCalike</strong></a>: <a href="http://liwc.wpengine.com">Linguistic Inquiry and Word Count</a> (LIWC) アプローチによるテキスト分析のR実装</p>
<pre class="sourceCode r" id="cb3"><code class="sourceCode r"><div class="sourceLine" id="cb3-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"kbenoit/LIWCalike"</span>)</div></code></pre>
</li>
</ul></section></section><section id="creating-a-corpus" class="level1"><h1>コーパスの作成</h1>
<p>まず，<strong>quanteda</strong>を読み込んで，パッケージの関数とデータにアクセスできるようにする．</p>
<pre class="sourceCode r" id="cb4"><code class="sourceCode r"><div class="sourceLine" id="cb4-1" data-line-number="1">
<span class="kw">library</span>(quanteda)</div></code></pre>
<section id="currently-available-corpus-sources" class="level2"><h2>利用可能なコーパス</h2>
<p><strong>quanteda</strong>にはテキストを読み込むためのシンプルで強力なパッケージ，<a href="https://github.com/kbenoit/readtext"><strong>readtext</strong></a>があります．このパッケージの<code><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext()</a></code>は，ローカス・ストレージやインターネットからファイル読み込み，<code><a href="../../../reference/corpus.html">corpus()</a></code>にデータ・フレームを返す．</p>
<p><code><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext()</a></code>で利用可能なファイルやデータの形式:</p>
<ul>
<li>テキスト（<code>.txt</code>）ファイル</li>
<li>コンマ区切り値（<code>.csv</code>）ファイル</li>
<li>XML形式のデータ</li>
<li>JSON形式のFacebook APIのデータ</li>
<li>JSON形式のTwitter APIのデータ</li>
<li>一般的なJSONデータ</li>
</ul>
<p><strong>quanteda</strong>のコーパスを生成する関数である <code><a href="../../../reference/corpus.html">corpus()</a></code>は，以下の種類のデータを読み込むことができる．</p>
<ul>
<li>文字列ベクトル（例：<strong>readtext</strong>以外のツールを使用して読み込んだテキスト）</li>
<li>
<strong>tm</strong>パッケージの <code>VCorpus</code>コーパスオブジェクト</li>
<li>テキスト列と他の文書に対応したメタデータを含むデータ・フレーム</li>
</ul>
<section id="building-a-corpus-from-a-character-vector" class="level3"><h3>文字列からコーパスを作成</h3>
<p>コーパスを作成する最も簡単な方法は，<code><a href="../../../reference/corpus.html">corpus()</a></code>を用いて，すでにRに読み込まれた文字列ベクトル作成することである．文字列ベクトルをRに取り込む方法はさまざまなので，高度なRユーザーは，コーパスをいろいろな方法で作り出せる．</p>
<p>次の例では，<strong>quanteda</strong>パッケージに含まれているイギリスの政党が2010年の総選挙のために発行したマニフェストのテキストデータ（<code>data_char_ukimmig2010</code>）からコーパスを作成している．</p>
<pre class="sourceCode r" id="cb5"><code class="sourceCode r"><div class="sourceLine" id="cb5-1" data-line-number="1">my_corpus &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(data_char_ukimmig2010)  <span class="co"># テキストからコーパスを作成</span>
</div>
<div class="sourceLine" id="cb5-2" data-line-number="2">
<span class="kw">summary</span>(my_corpus)</div></code></pre>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences
##           BNP  1125   3280        88
##     Coalition   142    260         4
##  Conservative   251    499        15
##        Greens   322    679        21
##        Labour   298    683        29
##        LibDem   251    483        14
##            PC    77    114         5
##           SNP    88    134         4
##          UKIP   346    723        27
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/docs/articles/pkgdown/examples/* on x86_64 by kbenoit
## Created: Sat Mar 10 17:11:23 2018
## Notes:</code></pre>
<p>コーパスを作成したあとでも，<code>docvars</code>を用いると，必要に応じて文書に対応した変数をこのコーパスに追加することができる．</p>
<p>たとえば，Rの<code>names()</code>関数を使って文字ベクトル（<code>data_char_ukimmig2010</code>）の名前を取得し，これを文書変数（<code>docvar()</code>）に追加することができる．</p>
<pre class="sourceCode r" id="cb7"><code class="sourceCode r"><div class="sourceLine" id="cb7-1" data-line-number="1">
<span class="kw"><a href="../../../reference/docvars.html">docvars</a></span>(my_corpus, <span class="st">"Party"</span>) &lt;-<span class="st"> </span><span class="kw">names</span>(data_char_ukimmig2010)</div>
<div class="sourceLine" id="cb7-2" data-line-number="2">
<span class="kw"><a href="../../../reference/docvars.html">docvars</a></span>(my_corpus, <span class="st">"Year"</span>) &lt;-<span class="st"> </span><span class="dv">2010</span>
</div>
<div class="sourceLine" id="cb7-3" data-line-number="3">
<span class="kw">summary</span>(my_corpus)</div></code></pre>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences        Party Year
##           BNP  1125   3280        88          BNP 2010
##     Coalition   142    260         4    Coalition 2010
##  Conservative   251    499        15 Conservative 2010
##        Greens   322    679        21       Greens 2010
##        Labour   298    683        29       Labour 2010
##        LibDem   251    483        14       LibDem 2010
##            PC    77    114         5           PC 2010
##           SNP    88    134         4          SNP 2010
##          UKIP   346    723        27         UKIP 2010
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/docs/articles/pkgdown/examples/* on x86_64 by kbenoit
## Created: Sat Mar 10 17:11:23 2018
## Notes:</code></pre>
<p>分析の対象となる文書変数ではではないけれども，文書の属性として残しておきたいと思うメタデータも，<code><a href="../../../reference/docvars.html">docvars()</a></code>を使って，コーパスに追加することができる．</p>
<pre class="sourceCode r" id="cb9"><code class="sourceCode r"><div class="sourceLine" id="cb9-1" data-line-number="1">
<span class="kw"><a href="../../../reference/metadoc.html">metadoc</a></span>(my_corpus, <span class="st">"language"</span>) &lt;-<span class="st"> "english"</span>
</div>
<div class="sourceLine" id="cb9-2" data-line-number="2">
<span class="kw"><a href="../../../reference/metadoc.html">metadoc</a></span>(my_corpus, <span class="st">"docsource"</span>)  &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">"data_char_ukimmig2010"</span>, <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="../../../reference/ndoc.html">ndoc</a></span>(my_corpus), <span class="dt">sep =</span> <span class="st">"_"</span>)</div>
<div class="sourceLine" id="cb9-3" data-line-number="3">
<span class="kw">summary</span>(my_corpus, <span class="dt">showmeta =</span> <span class="ot">TRUE</span>)</div></code></pre>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences _language              _docsource
##           BNP  1125   3280        88   english data_char_ukimmig2010_1
##     Coalition   142    260         4   english data_char_ukimmig2010_2
##  Conservative   251    499        15   english data_char_ukimmig2010_3
##        Greens   322    679        21   english data_char_ukimmig2010_4
##        Labour   298    683        29   english data_char_ukimmig2010_5
##        LibDem   251    483        14   english data_char_ukimmig2010_6
##            PC    77    114         5   english data_char_ukimmig2010_7
##           SNP    88    134         4   english data_char_ukimmig2010_8
##          UKIP   346    723        27   english data_char_ukimmig2010_9
##         Party Year
##           BNP 2010
##     Coalition 2010
##  Conservative 2010
##        Greens 2010
##        Labour 2010
##        LibDem 2010
##            PC 2010
##           SNP 2010
##          UKIP 2010
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/docs/articles/pkgdown/examples/* on x86_64 by kbenoit
## Created: Sat Mar 10 17:11:23 2018
## Notes:</code></pre>
<p><code><a href="../../../reference/metadoc.html">metadoc()</a></code>を用いると，文書メタデータのフィールドを自由に定義することができますが，単一の値（“english”）を文書変数（“language”）に付与するときには，Rが値を繰り替えして全ての文書に同じ値を付与していることに注意する必要がある．</p>
<p>独自の文書メタデータのフィールド（<code>docsource</code>）を作成するために，<strong>quanteda</strong>の関数である<code><a href="../../../reference/ndoc.html">ndoc()</a></code>を使ってコーパスに含まれる文書の総数を取得している．<code><a href="../../../reference/ndoc.html">ndoc()</a></code>は，<code>nrow()</code>や<code>ncol()</code>などのRの標準の関数と同じような方法で動作するように設計されている．</p>
</section><section id="loading-in-files-using-the-readtext-package" class="level3"><h3>readtextパッケージを用いたファイルの読み込み</h3>
<pre class="sourceCode r" id="cb11"><code class="sourceCode r"><div class="sourceLine" id="cb11-1" data-line-number="1">
<span class="kw">require</span>(readtext)</div>
<div class="sourceLine" id="cb11-2" data-line-number="2"></div>
<div class="sourceLine" id="cb11-3" data-line-number="3"><span class="co"># Twitter json</span></div>
<div class="sourceLine" id="cb11-4" data-line-number="4">mytf1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/social media/zombies/tweets.json"</span>)</div>
<div class="sourceLine" id="cb11-5" data-line-number="5">my_corpusTwitter &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(mytf1)</div>
<div class="sourceLine" id="cb11-6" data-line-number="6">
<span class="kw">summary</span>(my_corpusTwitter, <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb11-7" data-line-number="7"><span class="co"># generic json - needs a textfield specifier</span></div>
<div class="sourceLine" id="cb11-8" data-line-number="8">mytf2 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/Manuscripts/collocations/Corpora/sotu/sotu.json"</span>,</div>
<div class="sourceLine" id="cb11-9" data-line-number="9">                  <span class="dt">textfield =</span> <span class="st">"text"</span>)</div>
<div class="sourceLine" id="cb11-10" data-line-number="10">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(mytf2), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb11-11" data-line-number="11"><span class="co"># text file</span></div>
<div class="sourceLine" id="cb11-12" data-line-number="12">mytf3 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/project_gutenberg/pg2701.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb11-13" data-line-number="13">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(mytf3), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb11-14" data-line-number="14"><span class="co"># multiple text files</span></div>
<div class="sourceLine" id="cb11-15" data-line-number="15">mytf4 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb11-16" data-line-number="16">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(mytf4), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb11-17" data-line-number="17"><span class="co"># multiple text files with docvars from filenames</span></div>
<div class="sourceLine" id="cb11-18" data-line-number="18">mytf5 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, </div>
<div class="sourceLine" id="cb11-19" data-line-number="19">                  <span class="dt">docvarsfrom =</span> <span class="st">"filenames"</span>, <span class="dt">sep =</span> <span class="st">"-"</span>, <span class="dt">docvarnames =</span> <span class="kw">c</span>(<span class="st">"Year"</span>, <span class="st">"President"</span>))</div>
<div class="sourceLine" id="cb11-20" data-line-number="20">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(mytf5), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb11-21" data-line-number="21"><span class="co"># XML data</span></div>
<div class="sourceLine" id="cb11-22" data-line-number="22">mytf6 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/quanteda_working_files/xmlData/plant_catalog.xml"</span>, </div>
<div class="sourceLine" id="cb11-23" data-line-number="23">                  <span class="dt">textfield =</span> <span class="st">"COMMON"</span>)</div>
<div class="sourceLine" id="cb11-24" data-line-number="24">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(mytf6), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb11-25" data-line-number="25"><span class="co"># csv file</span></div>
<div class="sourceLine" id="cb11-26" data-line-number="26">
<span class="kw">write.csv</span>(<span class="kw">data.frame</span>(<span class="dt">inaugSpeech =</span> <span class="kw"><a href="../../../reference/texts.html">texts</a></span>(data_corpus_inaugural), </div>
<div class="sourceLine" id="cb11-27" data-line-number="27">                     <span class="kw"><a href="../../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural)),</div>
<div class="sourceLine" id="cb11-28" data-line-number="28">          <span class="dt">file =</span> <span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb11-29" data-line-number="29">mytf7 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">textfield =</span> <span class="st">"inaugSpeech"</span>)</div>
<div class="sourceLine" id="cb11-30" data-line-number="30">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(mytf7), <span class="dv">5</span>)</div></code></pre>
</section></section><section id="how-a-quanteda-corpus-works" class="level2"><h2>コーパスオブジェクトの使い方</h2>
<section id="corpus-principles" class="level3"><h3>コーパスの原理</h3>
<p><strong>quanteda</strong>のコーパスは，元の文書をユニコード（UTF-8）に変換し，文書に対するメタデータと一緒に格納しすることで、ステミングや句読点の削除などの処理よって変更されないテキストデータの静的な保管庫になるように設計されている．これによって，コーパスから文書を抽出して新しいオブジェクトを作成した後でも，コーパスには元のデータが残り，別の分析を，同じコーパスを用いて行うことができる．</p>
<p>コーパスから文書を取り出すためには，<code><a href="../../../reference/texts.html">texts()</a></code>と呼ばれる関数を使用する．</p>
<pre class="sourceCode r" id="cb12"><code class="sourceCode r"><div class="sourceLine" id="cb12-1" data-line-number="1">
<span class="kw"><a href="../../../reference/texts.html">texts</a></span>(data_corpus_inaugural)[<span class="dv">2</span>]</div></code></pre>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington 
## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</code></pre>
<p><code>summary()</code>により，コーパス内のテキストの要約を行うことができる．</p>
<pre class="sourceCode r" id="cb14"><code class="sourceCode r"><div class="sourceLine" id="cb14-1" data-line-number="1">
<span class="kw">summary</span>(data_corpus_irishbudget2010)</div></code></pre>
<pre><code>## Corpus consisting of 14 documents:
## 
##                                   Text Types Tokens Sentences year debate
##        2010_BUDGET_01_Brian_Lenihan_FF  1953   8641       374 2010 BUDGET
##       2010_BUDGET_02_Richard_Bruton_FG  1040   4446       217 2010 BUDGET
##         2010_BUDGET_03_Joan_Burton_LAB  1624   6393       307 2010 BUDGET
##        2010_BUDGET_04_Arthur_Morgan_SF  1595   7107       343 2010 BUDGET
##          2010_BUDGET_05_Brian_Cowen_FF  1629   6599       250 2010 BUDGET
##           2010_BUDGET_06_Enda_Kenny_FG  1148   4232       153 2010 BUDGET
##      2010_BUDGET_07_Kieran_ODonnell_FG   678   2297       133 2010 BUDGET
##       2010_BUDGET_08_Eamon_Gilmore_LAB  1181   4177       201 2010 BUDGET
##     2010_BUDGET_09_Michael_Higgins_LAB   488   1286        44 2010 BUDGET
##        2010_BUDGET_10_Ruairi_Quinn_LAB   439   1284        59 2010 BUDGET
##      2010_BUDGET_11_John_Gormley_Green   401   1030        49 2010 BUDGET
##        2010_BUDGET_12_Eamon_Ryan_Green   510   1643        90 2010 BUDGET
##      2010_BUDGET_13_Ciaran_Cuffe_Green   442   1240        45 2010 BUDGET
##  2010_BUDGET_14_Caoimhghin_OCaolain_SF  1188   4044       176 2010 BUDGET
##  number      foren     name party
##      01      Brian  Lenihan    FF
##      02    Richard   Bruton    FG
##      03       Joan   Burton   LAB
##      04     Arthur   Morgan    SF
##      05      Brian    Cowen    FF
##      06       Enda    Kenny    FG
##      07     Kieran ODonnell    FG
##      08      Eamon  Gilmore   LAB
##      09    Michael  Higgins   LAB
##      10     Ruairi    Quinn   LAB
##      11       John  Gormley Green
##      12      Eamon     Ryan Green
##      13     Ciaran    Cuffe Green
##      14 Caoimhghin OCaolain    SF
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/* on x86_64 by kbenoit
## Created: Wed Jun 28 22:04:18 2017
## Notes:</code></pre>
<p><code>summary()</code>の出力をデータ・フレームとして保存し，基本的な記述統計を描画することができる．</p>
<pre class="sourceCode r" id="cb16"><code class="sourceCode r"><div class="sourceLine" id="cb16-1" data-line-number="1">tokenInfo &lt;-<span class="st"> </span><span class="kw">summary</span>(data_corpus_inaugural)</div>
<div class="sourceLine" id="cb16-2" data-line-number="2">
<span class="cf">if</span> (<span class="kw">require</span>(ggplot2))</div>
<div class="sourceLine" id="cb16-3" data-line-number="3">    <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> tokenInfo, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> Tokens, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>() <span class="op">+</span>
</div>
<div class="sourceLine" id="cb16-4" data-line-number="4">
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_continuous">scale_x_continuous</a></span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="kw">seq</span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>)), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>)) <span class="op">+</span><span class="st"> </span>
</div>
<div class="sourceLine" id="cb16-5" data-line-number="5">
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_bw</a></span>()</div></code></pre>
<pre><code>## Loading required package: ggplot2</code></pre>
<p><img src="quickstart_ja_files/figure-html/unnamed-chunk-12-1.png" width="768"></p>
<pre class="sourceCode r" id="cb18"><code class="sourceCode r"><div class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># Longest inaugural address: William Henry Harrison</span></div>
<div class="sourceLine" id="cb18-2" data-line-number="2">tokenInfo[<span class="kw">which.max</span>(tokenInfo<span class="op">$</span>Tokens), ] </div></code></pre>
<pre><code>##             Text Types Tokens Sentences Year President     FirstName
## 14 1841-Harrison  1896   9144       210 1841  Harrison William Henry</code></pre>
</section></section><section id="tools-for-handling-corpus-objects" class="level2"><h2>コーパスに対する操作</h2>
<section id="adding-two-corpus-objects-together" class="level3"><h3>コーパスの結合</h3>
<p><code>+</code>演算子を用いると，簡単に二個のコーパスを連結できます．コーパスが異なる構造を持つ場合でも，文書変数が失われることはなく，コーパスのメタデータも引き継がれる．</p>
<pre class="sourceCode r" id="cb20"><code class="sourceCode r"><div class="sourceLine" id="cb20-1" data-line-number="1">
<span class="kw">library</span>(quanteda)</div>
<div class="sourceLine" id="cb20-2" data-line-number="2">my_corpus1 &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</div>
<div class="sourceLine" id="cb20-3" data-line-number="3">my_corpus2 &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">53</span><span class="op">:</span><span class="dv">58</span>])</div>
<div class="sourceLine" id="cb20-4" data-line-number="4">my_corpus3 &lt;-<span class="st"> </span>my_corpus1 <span class="op">+</span><span class="st"> </span>my_corpus2</div>
<div class="sourceLine" id="cb20-5" data-line-number="5">
<span class="kw">summary</span>(my_corpus3)</div></code></pre>
<pre><code>## Corpus consisting of 11 documents:
## 
##             Text Types Tokens Sentences
##  1789-Washington   625   1538        23
##  1793-Washington    96    147         4
##       1797-Adams   826   2578        37
##   1801-Jefferson   717   1927        41
##   1805-Jefferson   804   2381        45
##     1997-Clinton   773   2449       111
##        2001-Bush   621   1808        97
##        2005-Bush   773   2319       100
##       2009-Obama   938   2711       110
##       2013-Obama   814   2317        88
##       2017-Trump   582   1660        88
## 
## Source: Combination of corpuses my_corpus1 and my_corpus2
## Created: Sat Mar 10 17:11:25 2018
## Notes:</code></pre>
</section><section id="subsetting-corpus-objects" class="level3"><h3>コーパスから文書を抽出</h3>
<p><code><a href="../../../reference/corpus_subset.html">corpus_subset()</a></code>により，文書変数に適用される論理条件に基づいて文書を抽出することができる．</p>
<pre class="sourceCode r" id="cb22"><code class="sourceCode r"><div class="sourceLine" id="cb22-1" data-line-number="1">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>))</div></code></pre>
<pre><code>## Corpus consisting of 7 documents:
## 
##          Text Types Tokens Sentences Year President FirstName
##  1993-Clinton   642   1833        81 1993   Clinton      Bill
##  1997-Clinton   773   2449       111 1997   Clinton      Bill
##     2001-Bush   621   1808        97 2001      Bush George W.
##     2005-Bush   773   2319       100 2005      Bush George W.
##    2009-Obama   938   2711       110 2009     Obama    Barack
##    2013-Obama   814   2317        88 2013     Obama    Barack
##    2017-Trump   582   1660        88 2017     Trump Donald J.
## 
## Source: Gerhard Peters and John T. Woolley. The American Presidency Project.
## Created: Tue Jun 13 14:51:47 2017
## Notes: http://www.presidency.ucsb.edu/inaugurals.php</code></pre>
<pre class="sourceCode r" id="cb24"><code class="sourceCode r"><div class="sourceLine" id="cb24-1" data-line-number="1">
<span class="kw">summary</span>(<span class="kw"><a href="../../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, President <span class="op">==</span><span class="st"> "Adams"</span>))</div></code></pre>
<pre><code>## Corpus consisting of 2 documents:
## 
##        Text Types Tokens Sentences Year President   FirstName
##  1797-Adams   826   2578        37 1797     Adams        John
##  1825-Adams  1003   3152        74 1825     Adams John Quincy
## 
## Source: Gerhard Peters and John T. Woolley. The American Presidency Project.
## Created: Tue Jun 13 14:51:47 2017
## Notes: http://www.presidency.ucsb.edu/inaugurals.php</code></pre>
</section></section><section id="exploring-corpus-texts" class="level2"><h2>コーパス内の文書の探索</h2>
<p><code><a href="../../../reference/kwic.html">kwic()</a></code>（keywords-in-context）は単語の検索を行い，その単語が現れる文脈を表示する．</p>
<pre class="sourceCode r" id="cb26"><code class="sourceCode r"><div class="sourceLine" id="cb26-1" data-line-number="1">
<span class="kw"><a href="../../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"terror"</span>)</div></code></pre>
<pre><code>##                                                                     
##     [1797-Adams, 1325]              fraud or violence, by | terror |
##  [1933-Roosevelt, 112] nameless, unreasoning, unjustified | terror |
##  [1941-Roosevelt, 287]      seemed frozen by a fatalistic | terror |
##    [1961-Kennedy, 866]    alter that uncertain balance of | terror |
##     [1981-Reagan, 813]     freeing all Americans from the | terror |
##   [1997-Clinton, 1055]        They fuel the fanaticism of | terror |
##   [1997-Clinton, 1655]  maintain a strong defense against | terror |
##     [2009-Obama, 1632]     advance their aims by inducing | terror |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  of runaway living costs.         
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we</code></pre>
<pre class="sourceCode r" id="cb28"><code class="sourceCode r"><div class="sourceLine" id="cb28-1" data-line-number="1">
<span class="kw"><a href="../../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"terror"</span>, <span class="dt">valuetype =</span> <span class="st">"regex"</span>)</div></code></pre>
<pre><code>##                                                                           
##     [1797-Adams, 1325]                   fraud or violence, by |  terror  
##  [1933-Roosevelt, 112]      nameless, unreasoning, unjustified |  terror  
##  [1941-Roosevelt, 287]           seemed frozen by a fatalistic |  terror  
##    [1961-Kennedy, 866]         alter that uncertain balance of |  terror  
##    [1961-Kennedy, 990]               of science instead of its |  terrors 
##     [1981-Reagan, 813]          freeing all Americans from the |  terror  
##    [1981-Reagan, 2196]        understood by those who practice | terrorism
##   [1997-Clinton, 1055]             They fuel the fanaticism of |  terror  
##   [1997-Clinton, 1655]       maintain a strong defense against |  terror  
##     [2009-Obama, 1632]          advance their aims by inducing |  terror  
##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism
##                                     
##  | , intrigue, or venality          
##  | which paralyzes needed efforts to
##  | , we proved that this            
##  | that stays the hand of           
##  | . Together let us explore        
##  | of runaway living costs.         
##  | and prey upon their neighbors    
##  | . And they torment the           
##  | and destruction. Our children    
##  | and slaughtering innocents, we   
##  | , which we will eradicate</code></pre>
<pre class="sourceCode r" id="cb30"><code class="sourceCode r"><div class="sourceLine" id="cb30-1" data-line-number="1">
<span class="kw"><a href="../../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"communist*"</span>)</div></code></pre>
<pre><code>##                                                                   
##   [1949-Truman, 834] the actions resulting from the | Communist  |
##  [1961-Kennedy, 519]             -- not because the | Communists |
##                            
##  philosophy are a threat to
##  may be doing it,</code></pre>
<p>上記の要約では，“Year”と“President”は各文書に結び付けられた変数であり，<code><a href="../../../reference/docvars.html">docvars()</a></code>によってそれらにアクセスできる．</p>
<pre class="sourceCode r" id="cb32"><code class="sourceCode r"><div class="sourceLine" id="cb32-1" data-line-number="1">
<span class="kw">head</span>(<span class="kw"><a href="../../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural))</div></code></pre>
<pre><code>##                 Year  President FirstName
## 1789-Washington 1789 Washington    George
## 1793-Washington 1793 Washington    George
## 1797-Adams      1797      Adams      John
## 1801-Jefferson  1801  Jefferson    Thomas
## 1805-Jefferson  1805  Jefferson    Thomas
## 1809-Madison    1809    Madison     James</code></pre>
<p><a href="http://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>をインストールすることで，より多くのコーパスを試すことができる．</p>
</section></section><section id="extracting-features-from-a-corpus" class="level1"><h1>コーパスから特長を抽出</h1>
<p>文書のスケーリングなどの統計分析を行うためには，それぞれの文書の特長をまとめた行列を作成する必要があり，<strong>quanteda</strong>では，このような行列を生成するために <code><a href="../../../reference/dfm.html">dfm()</a></code>を使いる． dfmは<em>document-feature matrix</em>の略で，行が文書（document），列が特長（feature）となる行列である．行と列をこのように定義する理由は，データ分析では行が分析単位になり，各列が分析対象になる変数となるのが一般的だからである．多くのソフトウェアでは，この行列を<em>document-term matrix</em>と呼ぶが，<strong>quanteda</strong>が語（term）でなはく特長（feature）という用語を使うのは，特長のほうが一般性を持つからで，テキスト分析では，単語，語幹，単語の集合，Nグラム，品詞など様々なものが文書の特長となる．</p>
<section id="tokenizing-texts" class="level2"><h2>文書のトークン化</h2>
<p>テキストを簡単にトークン化するために，<strong>quanteda</strong>は <code><a href="../../../reference/tokens.html">tokens()</a></code>と呼ばれる強力なコマンドを提供する．この関数は，文字ベクトルのトークンのリストからなるオブジェクトを生成する．このオブジェクトでは，リストの一つ一つの要素は入力された文書に対応している．</p>
<p><code><a href="../../../reference/tokens.html">tokens()</a></code>は保守的に設計されており、ユーザーが明示的に指示を与えないかぎりは，要素を削除しない．</p>
<pre class="sourceCode r" id="cb34"><code class="sourceCode r"><div class="sourceLine" id="cb34-1" data-line-number="1">txt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">text1 =</span> <span class="st">"This is $10 in 999 different ways,</span><span class="ch">\n</span><span class="st"> up and down; left and right!"</span>, </div>
<div class="sourceLine" id="cb34-2" data-line-number="2">         <span class="dt">text2 =</span> <span class="st">"@kenbenoit working: on #quanteda 2day</span><span class="ch">\t</span><span class="st">4ever, http://textasdata.com?page=123."</span>)</div>
<div class="sourceLine" id="cb34-3" data-line-number="3">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(txt)</div></code></pre>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"       
##  [6] "999"       "different" "ways"      ","         "up"       
## [11] "and"       "down"      ";"         "left"      "and"      
## [16] "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "123"            "."</code></pre>
<pre class="sourceCode r" id="cb36"><code class="sourceCode r"><div class="sourceLine" id="cb36-1" data-line-number="1">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div></code></pre>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "in"        "different" "ways"     
##  [6] "up"        "and"       "down"      "left"      "and"      
## [11] "right"    
## 
## text2 :
## [1] "@kenbenoit"     "working"        "on"             "#quanteda"     
## [5] "2day"           "4ever"          "http"           "textasdata.com"
## [9] "page"</code></pre>
<pre class="sourceCode r" id="cb38"><code class="sourceCode r"><div class="sourceLine" id="cb38-1" data-line-number="1">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div></code></pre>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "10"        "in"        "999"      
##  [6] "different" "ways"      "up"        "and"       "down"     
## [11] "left"      "and"       "right"    
## 
## text2 :
##  [1] "@kenbenoit"     "working"        "on"             "#quanteda"     
##  [5] "2day"           "4ever"          "http"           "textasdata.com"
##  [9] "page"           "123"</code></pre>
<pre class="sourceCode r" id="cb40"><code class="sourceCode r"><div class="sourceLine" id="cb40-1" data-line-number="1">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</div></code></pre>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "in"        "different"
##  [6] "ways"      ","         "up"        "and"       "down"     
## [11] ";"         "left"      "and"       "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "."</code></pre>
<pre class="sourceCode r" id="cb42"><code class="sourceCode r"><div class="sourceLine" id="cb42-1" data-line-number="1">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</div></code></pre>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"       
##  [6] "999"       "different" "ways"      ","         "up"       
## [11] "and"       "down"      ";"         "left"      "and"      
## [16] "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "123"            "."</code></pre>
<pre class="sourceCode r" id="cb44"><code class="sourceCode r"><div class="sourceLine" id="cb44-1" data-line-number="1">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>, <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</div></code></pre>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      " "         "is"        " "         "$"        
##  [6] "10"        " "         "in"        " "         "999"      
## [11] " "         "different" " "         "ways"      ","        
## [16] "\n"        " "         "up"        " "         "and"      
## [21] " "         "down"      ";"         " "         "left"     
## [26] " "         "and"       " "         "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     " "              "working"        ":"             
##  [5] " "              "on"             " "              "#quanteda"     
##  [9] " "              "2day"           "\t"             "4ever"         
## [13] ","              " "              "http"           ":"             
## [17] "/"              "/"              "textasdata.com" "?"             
## [21] "page"           "="              "123"            "."</code></pre>
<p>また，<code><a href="../../../reference/tokens.html">tokens()</a></code>には個々の文字をトークン化するオプションもある．</p>
<pre class="sourceCode r" id="cb46"><code class="sourceCode r"><div class="sourceLine" id="cb46-1" data-line-number="1">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>)</div></code></pre>
<pre><code>## tokens from 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e" ":" "h" "t" "t" "p"
## [18] ":" "/" "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c" "o" "m"
## [35] "?" "p" "a" "g" "e" "=" "1" "2" "3" "."</code></pre>
<pre class="sourceCode r" id="cb48"><code class="sourceCode r"><div class="sourceLine" id="cb48-1" data-line-number="1">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>, </div>
<div class="sourceLine" id="cb48-2" data-line-number="2">         <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</div></code></pre>
<pre><code>## tokens from 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t" "e" ":" " " "h" "t"
## [18] "t" "p" ":" "/" "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c"
## [35] "o" "m" "?" "p" "a" "g" "e" "=" "1" "2" "3" "."</code></pre>
<p>もしくは，一文ごとにトークン化するオプションもある．</p>
<pre class="sourceCode r" id="cb50"><code class="sourceCode r"><div class="sourceLine" id="cb50-1" data-line-number="1"><span class="co"># sentence level         </span></div>
<div class="sourceLine" id="cb50-2" data-line-number="2">
<span class="kw"><a href="../../../reference/tokens.html">tokens</a></span>(<span class="kw">c</span>(<span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>, </div>
<div class="sourceLine" id="cb50-3" data-line-number="3">         <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>, </div>
<div class="sourceLine" id="cb50-4" data-line-number="4">         <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span>), </div>
<div class="sourceLine" id="cb50-5" data-line-number="5">         <span class="dt">what =</span> <span class="st">"sentence"</span>)</div></code></pre>
<pre><code>## tokens from 3 documents.
## text1 :
## [1] "Kurt Vongeut said; only assholes use semi-colons."
## 
## text2 :
## [1] "Today is Thursday in Canberra:  It is yesterday in London."
## 
## text3 :
## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</code></pre>
</section><section id="constructing-a-document-feature-matrix" class="level2"><h2>文書行列の作成</h2>
<p>データからすぐに文書行列を作成したい場合は、<code><a href="../../../reference/dfm.html">dfm()</a></code>に直接文字列ベクトルもしくはコーパスを渡すと、自動的にトークン化が行われ。<code><a href="../../../reference/dfm.html">dfm()</a></code>は、デフォルトで大文字から小文字への置換や，句読点を除去などの操作を適用する．また，<code><a href="../../../reference/dfm.html">dfm()</a></code>から<code><a href="../../../reference/tokens.html">tokens()</a></code>の全てのオプションを利用できる．</p>
<pre class="sourceCode r" id="cb52"><code class="sourceCode r"><div class="sourceLine" id="cb52-1" data-line-number="1">my_corpus &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>)</div>
<div class="sourceLine" id="cb52-2" data-line-number="2">my_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(my_corpus)</div>
<div class="sourceLine" id="cb52-3" data-line-number="3">my_dfm[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</div></code></pre>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (0% sparse).
## 7 x 5 sparse Matrix of class "dfm"
##               features
## docs           my fellow citizens   , today
##   1993-Clinton  7      5        2 139    10
##   1997-Clinton  6      7        7 131     5
##   2001-Bush     3      1        9 110     2
##   2005-Bush     2      3        6 120     3
##   2009-Obama    2      1        1 130     6
##   2013-Obama    3      3        6  99     4
##   2017-Trump    1      1        4  96     4</code></pre>
<p>以下の例では<code><a href="../../../reference/dfm.html">dfm()</a></code>の追加のオプションを用いて、ストップワードの削除（<code>remove</code>）と語のステミング（<code>stem</code>）を行っている．</p>
<pre class="sourceCode r" id="cb54"><code class="sourceCode r"><div class="sourceLine" id="cb54-1" data-line-number="1">myStemMat &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(my_corpus, <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), </div>
<div class="sourceLine" id="cb54-2" data-line-number="2">                 <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb54-3" data-line-number="3">myStemMat[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</div></code></pre>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (17.1% sparse).
## 7 x 5 sparse Matrix of class "dfm"
##               features
## docs           fellow citizen today celebr mysteri
##   1993-Clinton      5       2    10      4       1
##   1997-Clinton      7       8     6      1       0
##   2001-Bush         1      10     2      0       0
##   2005-Bush         3       7     3      2       0
##   2009-Obama        1       1     6      2       0
##   2013-Obama        3       8     6      1       0
##   2017-Trump        1       4     5      3       1</code></pre>
<p><code>remove</code>によって，文書行列から除外するトークンを指定する．<code><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords()</a></code>は，幾つかの言語で定義されたストップワードのリストを返す．</p>
<pre class="sourceCode r" id="cb56"><code class="sourceCode r"><div class="sourceLine" id="cb56-1" data-line-number="1">
<span class="kw">head</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dv">20</span>)</div></code></pre>
<pre><code>##  [1] "i"          "me"         "my"         "myself"     "we"        
##  [6] "our"        "ours"       "ourselves"  "you"        "your"      
## [11] "yours"      "yourself"   "yourselves" "he"         "him"       
## [16] "his"        "himself"    "she"        "her"        "hers"</code></pre>
<pre class="sourceCode r" id="cb58"><code class="sourceCode r"><div class="sourceLine" id="cb58-1" data-line-number="1">
<span class="kw">head</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"russian"</span>), <span class="dv">10</span>)</div></code></pre>
<pre><code>##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</code></pre>
<pre class="sourceCode r" id="cb60"><code class="sourceCode r"><div class="sourceLine" id="cb60-1" data-line-number="1">
<span class="kw">head</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"arabic"</span>), <span class="dv">10</span>)</div></code></pre>
<pre><code>## Warning: 'stopwords(language = "ar")' is deprecated.
## Use 'stopwords(language = "ar", source = "misc")' instead.
## See help("Deprecated")</code></pre>
<pre><code>##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</code></pre>
<section id="viewing-the-document-feature-matrix" class="level3"><h3>文書行列の表示</h3>
<p>RStudioの“Environment”パネル，またはRの<code><a href="../../../reference/View.html">View()</a></code>を用いることで，dfmに格納された値を見ることができる．</p>
<pre class="sourceCode r" id="cb63"><code class="sourceCode r"><div class="sourceLine" id="cb63-1" data-line-number="1">my_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(data_char_ukimmig2010, <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb63-2" data-line-number="2">my_dfm</div></code></pre>
<pre><code>## Document-feature matrix of: 9 documents, 1,547 features (83.8% sparse).</code></pre>
<p>頻度が最も高い特長を見るには，<code><a href="../../../reference/topfeatures.html">topfeatures()</a></code>を用いる．</p>
<pre class="sourceCode r" id="cb65"><code class="sourceCode r"><div class="sourceLine" id="cb65-1" data-line-number="1">
<span class="kw"><a href="../../../reference/topfeatures.html">topfeatures</a></span>(my_dfm, <span class="dv">20</span>)  <span class="co"># 20 top words</span>
</div></code></pre>
<pre><code>## immigration     british      people      asylum     britain          uk 
##          66          37          35          29          28          27 
##      system  population     country         new  immigrants      ensure 
##          27          21          20          19          17          17 
##       shall citizenship      social    national         bnp     illegal 
##          17          16          14          14          13          13 
##        work     percent 
##          13          12</code></pre>
<p>dfmを<code><a href="../../../reference/textplot_wordcloud.html">textplot_wordcloud()</a></code>に渡すことで，ワードクラウドを描画できる．この関数は，オブジェクトや引数を<strong>wordcloud</strong>パッケージの<code><a href="../../../reference/wordcloud.html">wordcloud()</a></code>に渡すので，ワードクラウドの表示を変更できる．</p>
<pre class="sourceCode r" id="cb67"><code class="sourceCode r"><div class="sourceLine" id="cb67-1" data-line-number="1">
<span class="kw">set.seed</span>(<span class="dv">100</span>)</div>
<div class="sourceLine" id="cb67-2" data-line-number="2">
<span class="kw"><a href="../../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(my_dfm, <span class="dt">min_count =</span> <span class="dv">6</span>, <span class="dt">random_order =</span> <span class="ot">FALSE</span>,</div>
<div class="sourceLine" id="cb67-3" data-line-number="3">                   <span class="dt">rotation =</span> <span class="fl">.25</span>, </div>
<div class="sourceLine" id="cb67-4" data-line-number="4">                   <span class="dt">color =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/RColorBrewer/topics/ColorBrewer">brewer.pal</a></span>(<span class="dv">8</span>,<span class="st">"Dark2"</span>))</div></code></pre>
<p><img src="quickstart_ja_files/figure-html/unnamed-chunk-27-1.png" width="672"></p>
</section><section id="grouping-documents-by-document-variable" class="level3"><h3>変数による文書のグループ化</h3>
<p><strong>quanteda</strong>では，dfmを作成する際に，文書変数の値によって文書をグループ化するすることができる．</p>
<pre class="sourceCode r" id="cb68"><code class="sourceCode r"><div class="sourceLine" id="cb68-1" data-line-number="1">by_party_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, <span class="dt">groups =</span> <span class="st">"party"</span>, </div>
<div class="sourceLine" id="cb68-2" data-line-number="2">                  <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div></code></pre>
<p>また、以下のように，dfmを語の頻度順に並べ替えて，中身を確かめられる．</p>
<pre class="sourceCode r" id="cb69"><code class="sourceCode r"><div class="sourceLine" id="cb69-1" data-line-number="1">
<span class="kw"><a href="../../../reference/dfm_sort.html">dfm_sort</a></span>(by_party_dfm)[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</div></code></pre>
<pre><code>## Document-feature matrix of: 5 documents, 10 features (0% sparse).
## 5 x 10 sparse Matrix of class "dfm"
##        features
## docs    people budget government public minister tax economy pay jobs
##   FF        23     44         47     65       11  60      37  41   41
##   FG        78     71         61     47       62  11      20  29   17
##   Green     15     26         19      4        4  11      16   4   15
##   LAB       69     66         36     32       54  47      37  24   20
##   SF        81     53         73     31       39  34      50  24   27
##        features
## docs    billion
##   FF         32
##   FG         21
##   Green       3
##   LAB        34
##   SF         29</code></pre>
</section><section id="grouping-words-by-dictionary-or-equivalence-class" class="level3"><h3>辞書による語のグループ化</h3>
<p>キーワードがあらかじめ分かっている場合，<code><a href="../../../reference/dictionary.html">dictionary()</a></code>によって辞書を作成し、語の出現回数を測定できる。次の例では，テロリズムに関連する言葉や経済に関連する言葉が，クリントン以降の大統領演説でどのように異なるかを示している．</p>
<pre class="sourceCode r" id="cb71"><code class="sourceCode r"><div class="sourceLine" id="cb71-1" data-line-number="1">recentCorpus &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1991</span>)</div></code></pre>
<p>テロリズムと経済という2つのリストからなる辞書を作成する．</p>
<pre class="sourceCode r" id="cb72"><code class="sourceCode r"><div class="sourceLine" id="cb72-1" data-line-number="1">myDict &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dictionary.html">dictionary</a></span>(<span class="kw">list</span>(<span class="dt">terror =</span> <span class="kw">c</span>(<span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span>),</div>
<div class="sourceLine" id="cb72-2" data-line-number="2">                          <span class="dt">economy =</span> <span class="kw">c</span>(<span class="st">"jobs"</span>, <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span>)))</div></code></pre>
<p>文書行列を作成するときに，この辞書を<code><a href="../../../reference/dfm.html">dfm()</a></code>の<code>dictionary</code>に渡す．</p>
<pre class="sourceCode r" id="cb73"><code class="sourceCode r"><div class="sourceLine" id="cb73-1" data-line-number="1">byPresMat &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(recentCorpus, <span class="dt">dictionary =</span> myDict)</div>
<div class="sourceLine" id="cb73-2" data-line-number="2">byPresMat</div></code></pre>
<pre><code>## Document-feature matrix of: 7 documents, 2 features (14.3% sparse).
## 7 x 2 sparse Matrix of class "dfm"
##               features
## docs           terror economy
##   1993-Clinton      0       8
##   1997-Clinton      1       8
##   2001-Bush         0       4
##   2005-Bush         1       6
##   2009-Obama        1      10
##   2013-Obama        1       6
##   2017-Trump        1       5</code></pre>
<p><code><a href="../../../reference/dictionary.html">dictionary()</a></code>は，LIWCやWordstatなどの一般的な辞書ファイルを読み込むことができる．以下では，LIWCの辞書を大統領就任演説に適用している．</p>
<pre class="sourceCode r" id="cb75"><code class="sourceCode r"><div class="sourceLine" id="cb75-1" data-line-number="1">liwcdict &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dictionary.html">dictionary</a></span>(<span class="dt">file =</span> <span class="st">"~/Dropbox/QUANTESS/dictionaries/LIWC/LIWC2001_English.dic"</span>,</div>
<div class="sourceLine" id="cb75-2" data-line-number="2">                       <span class="dt">format =</span> <span class="st">"LIWC"</span>)</div>
<div class="sourceLine" id="cb75-3" data-line-number="3">liwcdfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(data_corpus_inaugural[<span class="dv">52</span><span class="op">:</span><span class="dv">58</span>], <span class="dt">dictionary =</span> liwcdict)</div>
<div class="sourceLine" id="cb75-4" data-line-number="4">liwcdfm[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</div></code></pre>
</section></section></section><section id="further-examples" class="level1"><h1>追加の事例</h1>
<section id="similarities-between-texts" class="level2"><h2>文書の類似性</h2>
<pre class="sourceCode r" id="cb76"><code class="sourceCode r"><div class="sourceLine" id="cb76-1" data-line-number="1">pres_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1980</span>), </div>
<div class="sourceLine" id="cb76-2" data-line-number="2">               <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb76-3" data-line-number="3">obama_simil &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/textstat_simil.html">textstat_simil</a></span>(pres_dfm, <span class="kw">c</span>(<span class="st">"2009-Obama"</span> , <span class="st">"2013-Obama"</span>), </div>
<div class="sourceLine" id="cb76-4" data-line-number="4">                             <span class="dt">margin =</span> <span class="st">"documents"</span>, <span class="dt">method =</span> <span class="st">"cosine"</span>)</div>
<div class="sourceLine" id="cb76-5" data-line-number="5">obama_simil</div></code></pre>
<pre><code>##              2009-Obama 2013-Obama
## 2009-Obama    1.0000000  0.6815711
## 2013-Obama    0.6815711  1.0000000
## 1981-Reagan   0.6229949  0.6376412
## 1985-Reagan   0.6434472  0.6629428
## 1989-Bush     0.6253944  0.5784290
## 1993-Clinton  0.6280946  0.6265428
## 1997-Clinton  0.6593018  0.6466030
## 2001-Bush     0.6018113  0.6193608
## 2005-Bush     0.5266249  0.5867178
## 2017-Trump    0.5192075  0.5160104</code></pre>
<pre class="sourceCode r" id="cb78"><code class="sourceCode r"><div class="sourceLine" id="cb78-1" data-line-number="1"><span class="co"># dotchart(as.list(obama_simil)$"2009-Obama", xlab = "Cosine similarity")</span></div></code></pre>
<p>上記の文書間の類似性から樹形図を作成して，大統領を階層的に分類することができる．</p>
<pre class="sourceCode r" id="cb79"><code class="sourceCode r"><div class="sourceLine" id="cb79-1" data-line-number="1">
<span class="kw">data</span>(data_corpus_sotu, <span class="dt">package =</span> <span class="st">"quanteda.corpora"</span>)</div>
<div class="sourceLine" id="cb79-2" data-line-number="2">pres_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_sotu, Date <span class="op">&gt;</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1980-01-01"</span>)), </div>
<div class="sourceLine" id="cb79-3" data-line-number="3">               <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>,</div>
<div class="sourceLine" id="cb79-4" data-line-number="4">               <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>))</div>
<div class="sourceLine" id="cb79-5" data-line-number="5">pres_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm_trim.html">dfm_trim</a></span>(pres_dfm, <span class="dt">min_count =</span> <span class="dv">5</span>, <span class="dt">min_docfreq =</span> <span class="dv">3</span>)</div>
<div class="sourceLine" id="cb79-6" data-line-number="6"></div>
<div class="sourceLine" id="cb79-7" data-line-number="7"><span class="co"># hierarchical clustering - get distances on normalized dfm</span></div>
<div class="sourceLine" id="cb79-8" data-line-number="8">pres_dist_mat &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/textstat_simil.html">textstat_dist</a></span>(<span class="kw"><a href="../../../reference/dfm_weight.html">dfm_weight</a></span>(pres_dfm, <span class="st">"prop"</span>))</div>
<div class="sourceLine" id="cb79-9" data-line-number="9"><span class="co"># hiarchical clustering the distance object</span></div>
<div class="sourceLine" id="cb79-10" data-line-number="10">pres_cluster &lt;-<span class="st"> </span><span class="kw">hclust</span>(pres_dist_mat)</div>
<div class="sourceLine" id="cb79-11" data-line-number="11"><span class="co"># label with document names</span></div>
<div class="sourceLine" id="cb79-12" data-line-number="12">pres_cluster<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/docnames.html">docnames</a></span>(pres_dfm)</div>
<div class="sourceLine" id="cb79-13" data-line-number="13"><span class="co"># plot as a dendrogram</span></div>
<div class="sourceLine" id="cb79-14" data-line-number="14">
<span class="kw">plot</span>(pres_cluster, <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">sub =</span> <span class="st">""</span>, <span class="dt">main =</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span>)</div></code></pre>
<p>文書間と同様に用語間の類似性も測定できる．</p>
<pre class="sourceCode r" id="cb80"><code class="sourceCode r"><div class="sourceLine" id="cb80-1" data-line-number="1">sim &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/textstat_simil.html">textstat_simil</a></span>(pres_dfm, <span class="kw">c</span>(<span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span>), <span class="dt">method =</span> <span class="st">"cosine"</span>, <span class="dt">margin =</span> <span class="st">"features"</span>)</div>
<div class="sourceLine" id="cb80-2" data-line-number="2">
<span class="kw">lapply</span>(<span class="kw">as.list</span>(sim), head, <span class="dv">10</span>)</div></code></pre>
<pre><code>## $fair
##   economi     begin jefferson    author     faith      call   struggl 
## 0.9080252 0.9075951 0.8981462 0.8944272 0.8866586 0.8608285 0.8451543 
##      best     creat    courag 
## 0.8366600 0.8347300 0.8326664</code></pre>
</section><section id="scaling-document-positions" class="level2"><h2>文書のスケーリング</h2>
<p><strong>quanteda</strong>には多数のテキスト分析のためのモデルが含まれている．ここでは，ワードフィッシュ（<code><a href="../../../reference/textmodel_wordfish.html">textmodel_wordfish()</a></code>）による教師なしの文書のスケーリングを2010年のアイルランドの予算討論の分析に用いている．</p>
<pre class="sourceCode r" id="cb82"><code class="sourceCode r"><div class="sourceLine" id="cb82-1" data-line-number="1">ie_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010)</div>
<div class="sourceLine" id="cb82-2" data-line-number="2">
<span class="kw"><a href="../../../reference/textmodel_wordfish.html">textmodel_wordfish</a></span>(ie_dfm, <span class="dt">dir =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</div></code></pre>
<pre><code>## 
## Call:
## textmodel_wordfish.dfm(x = ie_dfm, dir = c(2, 1))
## 
## Dispersion: poisson; direction: 2 &lt; 1; 14 documents; 5140 features.</code></pre>
</section><section id="topic-models" class="level2"><h2>トピックモデル</h2>
<p><code><a href="../../../reference/convert.html">convert()</a></code>を用いると，dfmを<strong>topicmodels</strong>の<code><a href="http://www.rdocumentation.org/packages/topicmodels/topics/lda">LDA()</a></code>形式のデータに転換し，簡単にトピックモデルを適用できる．</p>
<pre class="sourceCode r" id="cb84"><code class="sourceCode r"><div class="sourceLine" id="cb84-1" data-line-number="1">quant_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, </div>
<div class="sourceLine" id="cb84-2" data-line-number="2">                <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>))</div>
<div class="sourceLine" id="cb84-3" data-line-number="3">quant_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../../reference/dfm_trim.html">dfm_trim</a></span>(quant_dfm, <span class="dt">min_termfreq =</span> <span class="dv">4</span>, <span class="dt">max_docfreq =</span> <span class="dv">10</span>)</div>
<div class="sourceLine" id="cb84-4" data-line-number="4">quant_dfm</div></code></pre>
<pre><code>## Document-feature matrix of: 14 documents, 1,263 features (64.5% sparse).</code></pre>
<pre class="sourceCode r" id="cb86"><code class="sourceCode r"><div class="sourceLine" id="cb86-1" data-line-number="1">
<span class="kw">set.seed</span>(<span class="dv">100</span>)</div>
<div class="sourceLine" id="cb86-2" data-line-number="2">
<span class="cf">if</span> (<span class="kw">require</span>(topicmodels)) {</div>
<div class="sourceLine" id="cb86-3" data-line-number="3">    my_lda_fit20 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/topicmodels/topics/lda">LDA</a></span>(<span class="kw"><a href="../../../reference/convert.html">convert</a></span>(quant_dfm, <span class="dt">to =</span> <span class="st">"topicmodels"</span>), <span class="dt">k =</span> <span class="dv">20</span>)</div>
<div class="sourceLine" id="cb86-4" data-line-number="4">    <span class="kw"><a href="http://www.rdocumentation.org/packages/topicmodels/topics/get">get_terms</a></span>(my_lda_fit20, <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb86-5" data-line-number="5">}</div></code></pre>
<pre><code>## Loading required package: topicmodels</code></pre>
<pre><code>##      Topic 1     Topic 2      Topic 3     Topic 4   Topic 5   
## [1,] "taoiseach" "measures"   "care"      "levy"    "fianna"  
## [2,] "fine"      "spending"   "welfare"   "million" "fáil"    
## [3,] "gael"      "million"    "per"       "carbon"  "national"
## [4,] "may"       "welfare"    "allowance" "change"  "irish"   
## [5,] "irish"     "reductions" "hit"       "welfare" "support" 
##      Topic 6       Topic 7   Topic 8    Topic 9     Topic 10      
## [1,] "kind"        "benefit" "bigger"   "taoiseach" "enterprising"
## [2,] "imagination" "child"   "strategy" "employees" "important"   
## [3,] "alternative" "day"     "rebuild"  "rate"      "sense"       
## [4,] "moral"       "bank"    "bring"    "referred"  "society"     
## [5,] "citizenship" "much"    "real"     "debate"    "built"       
##      Topic 11 Topic 12    Topic 13       Topic 14     Topic 15  
## [1,] "fianna" "reduction" "society"      "million"    "system"  
## [2,] "fáil"   "million"   "equal"        "support"    "welfare" 
## [3,] "side"   "scheme"    "nation"       "investment" "fianna"  
## [4,] "level"  "pension"   "enterprising" "welfare"    "fáil"    
## [5,] "third"  "details"   "sense"        "confidence" "taxation"
##      Topic 16   Topic 17   Topic 18    Topic 19     Topic 20  
## [1,] "strategy" "measures" "failed"    "welfare"    "today"   
## [2,] "fianna"   "welfare"  "needed"    "still"      "child"   
## [3,] "fáil"     "higher"   "strategy"  "increased"  "measures"
## [4,] "never"    "level"    "system"    "per"        "per"     
## [5,] "creating" "change"   "ministers" "investment" "fáil"</code></pre>
</section></section>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#installing-the-package">パッケージのインストール</a><ul class="nav nav-pills nav-stacked">
<li><a href="#additional-recommended-packages">インストールが推奨されるパッケージ</a></li>
      </ul>
</li>
      <li>
<a href="#creating-a-corpus">コーパスの作成</a><ul class="nav nav-pills nav-stacked">
<li><a href="#currently-available-corpus-sources">利用可能なコーパス</a></li>
      <li><a href="#how-a-quanteda-corpus-works">コーパスオブジェクトの使い方</a></li>
      <li><a href="#tools-for-handling-corpus-objects">コーパスに対する操作</a></li>
      <li><a href="#exploring-corpus-texts">コーパス内の文書の探索</a></li>
      </ul>
</li>
      <li>
<a href="#extracting-features-from-a-corpus">コーパスから特長を抽出</a><ul class="nav nav-pills nav-stacked">
<li><a href="#tokenizing-texts">文書のトークン化</a></li>
      <li><a href="#constructing-a-document-feature-matrix">文書行列の作成</a></li>
      </ul>
</li>
      <li>
<a href="#further-examples">追加の事例</a><ul class="nav nav-pills nav-stacked">
<li><a href="#similarities-between-texts">文書の類似性</a></li>
      <li><a href="#scaling-document-positions">文書のスケーリング</a></li>
      <li><a href="#topic-models">トピックモデル</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kenneth Benoit.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
